"use strict";(self.webpackChunkCmlsPlayer=self.webpackChunkCmlsPlayer||[]).push([[521],{3283:function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});n(8858),n(1318),n(3228);var o=n(5826),u=n(54),a=n(3583),r=n(3537),i=n(300);const c=["youtube.com","youtu.be","youtube-nocookie.com"];let s=!1;window.onYouTubeIframeAPIReady&&(window._onYouTubeIframeAPIReady=window.onYouTubeIframeAPIReady),window.onYouTubeIframeAPIReady=()=>{window._onYouTubeIframeAPIReady&&window._onYouTubeIframeAPIReady(),s=!0};const d=new a.Z("Patches / YouTube");function w(){return document.querySelectorAll(c.map((e=>`iframe[src*="${e}"]:not([cmls-patched])`)).join(","))}function f(){const e=w();e.length&&(document.querySelector('script[src*="https://www.youtube.com/iframe_api"]')||document.head.append((0,o.h)("script",{async:!0,src:"https://www.youtube.com/iframe_api"})),e.forEach((e=>{const t=new URL(e.getAttribute("src"));"1"!==t.searchParams.get("enablejsapi")&&(t.searchParams.set("enablejsapi",1),e.setAttribute("src",t));const n=e.getAttribute("id");n&&n.length||e.setAttribute("id",(0,i.Z)())})),(0,r.Z)(null,(()=>{if(void 0!==window.YT?.Player)return!0})).then((()=>{d.debug("YT SDK loaded");w().forEach((e=>{if(!e.getAttribute("cmls-patched")){const t=e.getAttribute("id");new window.YT.Player(t).addEventListener("onStateChange",(e=>{e.data===window.YT.PlayerState.PLAYING&&u.B.stop()})),e.setAttribute("cmls-patched",!0)}}))})).catch((()=>d.debug("YT SDK failed"))))}},3537:function(e,t,n){function o(e,t=(e=>void 0!==e),n=1e4){const o=Date.now();return new Promise((function u(a,r){t(e)?a(e):Date.now()-o>=n?r(new Error("Timed out waiting for ref")):setTimeout(u.bind(this,a,r),50)}))}n.d(t,{Z:function(){return o}})}}]);